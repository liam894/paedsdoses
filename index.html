<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Paediatric Dose Calculator</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      color: #2e7d32;
    }
    label, input {
      display: block;
      margin-top: 10px;
    }
    button {
      margin-top: 20px;
      padding: 10px 15px;
      font-size: 1rem;
    }
    .result {
      margin-top: 30px;
    }
    .result h2 {
      margin-top: 20px;
      color: #1565c0;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
  </style>
</head>
<body>

  <h1>Paediatric Dose Calculator</h1>

  <label for="weight">Weight (kg):</label>
  <input type="number" id="weight" step="0.1" placeholder="e.g. 18" min="1" max="50" required>

  <label for="age">Age (years):</label>
  <input type="number" id="age" step="0.1" placeholder="e.g. 4" min="0" max="17" required>

  <button onclick="calculate()">Calculate</button>

  <div class="result" id="output"></div>

  <script>
    function calculate() {
      const weight = parseFloat(document.getElementById('weight').value);
      const age = parseFloat(document.getElementById('age').value);
      const output = document.getElementById('output');

      if (isNaN(weight) || isNaN(age)) {
        output.innerHTML = "<p>Please enter valid numbers for both age and weight.</p>";
        return;
      }

        if (age > 17 || weight > 50) {
    output.innerHTML = "<p>Age must be 17 or under, and weight must be 50 kg or under.</p>";
    return;
  }

      let adrenalineAnaphylaxisDose;

      if (age > 12) {
        adrenalineAnaphylaxisDose = "500 mcg (0.5 ml of 1:1000 IM)";
      } else if (age >= 6 && age <= 12) {
        adrenalineAnaphylaxisDose = "300 mcg (0.3 ml of 1:1000 IM)";
      } else if (age < 6) {
        adrenalineAnaphylaxisDose = "150 mcg (0.15 ml of 1:1000 IM)";
      }

      const doses = {
            fentanyl: Math.round(1 * weight) + " mcg",
      propofol: Math.round(4 * weight) + " mg",
      rocuroniumRegular: Math.round(0.6 * weight) + " mg",
      rocuroniumRSI: Math.round(1.2 * weight) + " mg",
      suxIV: Math.round(2 * weight) + " mg",
      suxIM: Math.round(4 * weight) + " mg",
      ondansetron: Math.round(0.1 * weight) + " mg",
      dexamethasone: Math.round(0.1 * weight) + " mg",
      paracetamol: Math.round(15 * weight) + " mg",
      ibuprofen: Math.round(5 * weight) + " mg to " + Math.round(Math.min(10 * weight, 400)) + " mg",
      diclofenac: Math.round(1 * weight) + " mg",
      atropine: Math.round(20 * weight) + " mcg",
adrenalineArrest: Math.round(0.01 * weight * 1000) + " mcg (" + (Math.round(0.01 * weight * 1000) / 100) + " ml of 1:10,000 IV)",
        adrenalineAnaphylaxis: adrenalineAnaphylaxisDose,
      sugammadexLow: Math.round(2 * weight) + " mg",
      sugammadexHigh: Math.round(4 * weight) + " mg",
      tidalVolume: Math.round(7 * weight) + " mL",
      coamoxiclav: Math.round(Math.min(30 * weight, 1200)) + " mg",
      fluidBolus: Math.round(20 * weight) + " mL (" + Math.round(10*weight) + " in trauma)",
        glucose: Math.round(2 * weight) + " mL of 10% glucose",
        lorazepam: Math.round(0.1 * weight) + " mg",
        energy: Math.round(4* weight) + " joules"
      };

      // Airway calculations
      const ettSize = (age / 4 + 3.5).toFixed(1);
      const ettLength = (age / 2 + 12).toFixed(1);
      const ettNasal = (age / 2 + 15).toFixed(1);
      const igelSize = weight < 5 ? "1" :
                       weight < 12 ? "1.5" :
                       weight < 25 ? "2" :
                       weight < 35 ? "2.5" :
                       weight < 60 ? "3" : "4";
      const laryngoscope = age < 1 ? "Mac 1 or Miller 0" :
                            age < 3 ? "Mac 2 or Miller 1" :
                            age < 7 ? "Mac 2" : "Mac 3";

      output.innerHTML = `
        <div class="result">
          <h2>Routine drugs</h2>
          <ul>
            <li><strong>Fentanyl:</strong> ${doses.fentanyl}</li>
            <li><strong>Propofol:</strong> ${doses.propofol}</li>
            <li><strong>Rocuronium (Regular):</strong> ${doses.rocuroniumRegular}</li>
            <li><strong>Rocuronium (RSI):</strong> ${doses.rocuroniumRSI}</li>
            <li><strong>Suxamethonium (IV):</strong> ${doses.suxIV}</li>
            <li><strong>Ondansetron:</strong> ${doses.ondansetron}</li>
            <li><strong>Dexamethasone:</strong> ${doses.dexamethasone}</li>
            <li><strong>Paracetamol:</strong> ${doses.paracetamol}</li>
            <li><strong>Ibuprofen:</strong> ${doses.ibuprofen}</li>
            <li><strong>Diclofenac:</strong> ${doses.diclofenac}</li>
            <li><strong>Co-amoxiclav:</strong> ${doses.coamoxiclav}</li>
            <li><strong>Sugammadex:</strong> ${doses.sugammadexLow} â€“ ${doses.sugammadexHigh}</li>
          </ul>

           <h2>Emergency drugs</h2>
           <ul>
            <li><strong>Suxamethonium (IM):</strong> ${doses.suxIM}</li>
            <li><strong>Atropine:</strong> ${doses.atropine}</li>
            <li><strong>Adrenaline (Arrest):</strong> ${doses.adrenalineArrest}</li>
            <li><strong>Adrenaline (Anaphylaxis):</strong> ${doses.adrenalineAnaphylaxis}</li>
            <li><strong>Glucose:</strong> ${doses.glucose}</li>
            <li><strong>Lorazepam:</strong> ${doses.lorazepam}</li>
           </ul>

          <h2>Airway Equipment</h2>
          <ul>
            <li><strong>iGel Size:</strong> ${igelSize}</li>
            <li><strong>ETT Size (cuffed):</strong> ${ettSize}</li>
            <li><strong>ETT Length at Lips:</strong> ${ettLength} cm</li>
            <li><strong>ETT Length at Nose:</strong> ${ettNasal} cm</li>
            <li><strong>Laryngoscope:</strong> ${laryngoscope}</li>
          </ul>

           <h2>Other</h2>
          <ul>
            <li><strong>Tidal Volume:</strong> ${doses.tidalVolume}</li>
            <li><strong>Fluid Bolus:</strong> ${doses.fluidBolus}</li>
            <li><strong>Energy:</strong> ${doses.energy}</li>
          </ul>
        </div>
      `;
    }
  </script>
</body>
</html>
